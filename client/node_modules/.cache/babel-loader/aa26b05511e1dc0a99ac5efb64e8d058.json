{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\engah\\\\Desktop\\\\Projects\\\\Node.js\\\\MERN\\\\todo-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\engah\\\\Desktop\\\\Projects\\\\Node.js\\\\MERN\\\\todo-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\engah\\\\Desktop\\\\Projects\\\\Node.js\\\\MERN\\\\todo-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useReducer,createContext}from'react';import{todoReducer}from'../reducers/todoReducer';import axios from'axios';// Initial state\nvar initialState={todos:[]};// create context\nexport var TodosContext=createContext(initialState);// Provider component\nexport default function TodosContextProvider(_ref){var children=_ref.children;var _useReducer=useReducer(todoReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];//Actions\nfunction getTodos(){return _getTodos.apply(this,arguments);}function _getTodos(){_getTodos=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('http://localhost:5000/');case 3:res=_context.sent;dispatch({type:'GET_TODOS',payload:res.data.data});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return _getTodos.apply(this,arguments);}function addTodo(_x){return _addTodo.apply(this,arguments);}function _addTodo(){_addTodo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(newTodo){var config,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:config={headers:{'Content-Type':'application/json'}};_context2.prev=1;_context2.next=4;return axios.post('/',newTodo,config);case 4:res=_context2.sent;dispatch({type:'ADD_TODO',payload:res.data.data});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return _addTodo.apply(this,arguments);}function deleteTodo(_x2){return _deleteTodo.apply(this,arguments);}function _deleteTodo(){_deleteTodo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_id){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.delete(\"/\".concat(_id));case 3:dispatch({type:'DELETE_TODO',payload:{_id:_id}});_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return _deleteTodo.apply(this,arguments);}function searchTodo(_x3){return _searchTodo.apply(this,arguments);}function _searchTodo(){_searchTodo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(search){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch({type:'SEARCH_TODO',payload:{search:search}});case 1:case\"end\":return _context4.stop();}}},_callee4);}));return _searchTodo.apply(this,arguments);}return/*#__PURE__*/React.createElement(TodosContext.Provider,{value:{todos:state.todos,getTodos:getTodos,addTodo:addTodo,deleteTodo:deleteTodo,searchTodo:searchTodo}},children);}","map":{"version":3,"sources":["C:/Users/engah/Desktop/Projects/Node.js/MERN/todo-app/client/src/contexts/TodosContext.js"],"names":["React","useReducer","createContext","todoReducer","axios","initialState","todos","TodosContext","TodosContextProvider","children","state","dispatch","getTodos","get","res","type","payload","data","console","log","addTodo","newTodo","config","headers","post","deleteTodo","_id","delete","searchTodo","search"],"mappings":"6jBAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,aAA5B,KAAiD,OAAjD,CACA,OAASC,WAAT,KAA4B,yBAA5B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA;AACA,GAAMC,CAAAA,YAAY,CAAG,CAAEC,KAAK,CAAE,EAAT,CAArB,CAGA;AACA,MAAO,IAAMC,CAAAA,YAAY,CAAGL,aAAa,CAACG,YAAD,CAAlC,CAEP;AACA,cAAe,SAASG,CAAAA,oBAAT,MAA4C,IAAZC,CAAAA,QAAY,MAAZA,QAAY,iBAC/BR,UAAU,CAACE,WAAD,CAAcE,YAAd,CADqB,4CAClDK,KADkD,iBAC3CC,QAD2C,iBAGzD;AAHyD,QAI1CC,CAAAA,QAJ0C,kIAIzD,iLAEsBR,CAAAA,KAAK,CAACS,GAAN,CAAU,wBAAV,CAFtB,QAEUC,GAFV,eAGIH,QAAQ,CAAC,CACPI,IAAI,CAAE,WADC,CAEPC,OAAO,CAAEF,GAAG,CAACG,IAAJ,CAASA,IAFX,CAAD,CAAR,CAHJ,+EASIC,OAAO,CAACC,GAAR,cATJ,oEAJyD,mDAiB1CC,CAAAA,OAjB0C,iIAiBzD,kBAAuBC,OAAvB,qIACQC,MADR,CACiB,CACbC,OAAO,CAAE,CACP,eAAgB,kBADT,CADI,CADjB,yCAOsBnB,CAAAA,KAAK,CAACoB,IAAN,CAAW,GAAX,CAAgBH,OAAhB,CAAyBC,MAAzB,CAPtB,QAOUR,GAPV,gBAQIH,QAAQ,CAAC,CACPI,IAAI,CAAE,UADC,CAEPC,OAAO,CAAEF,GAAG,CAACG,IAAJ,CAASA,IAFX,CAAD,CAAR,CARJ,mFAaIC,OAAO,CAACC,GAAR,eAbJ,sEAjByD,kDAmC1CM,CAAAA,UAnC0C,2IAmCzD,kBAA0BC,GAA1B,8JAEUtB,CAAAA,KAAK,CAACuB,MAAN,YAAiBD,GAAjB,EAFV,QAGIf,QAAQ,CAAC,CACPI,IAAI,CAAE,aADC,CAEPC,OAAO,CAAE,CAAEU,GAAG,CAAHA,GAAF,CAFF,CAAD,CAAR,CAHJ,kFAQIR,OAAO,CAACC,GAAR,eARJ,qEAnCyD,qDAgD1CS,CAAAA,UAhD0C,2IAgDzD,kBAA0BC,MAA1B,sHACElB,QAAQ,CAAC,CACPI,IAAI,CAAE,aADC,CAEPC,OAAO,CAAE,CAAEa,MAAM,CAANA,MAAF,CAFF,CAAD,CAAR,CADF,wDAhDyD,6CAuDzD,mBACE,oBAAC,YAAD,CAAc,QAAd,EAAuB,KAAK,CAAE,CAAEvB,KAAK,CAAEI,KAAK,CAACJ,KAAf,CAAsBM,QAAQ,CAARA,QAAtB,CAAgCQ,OAAO,CAAPA,OAAhC,CAAyCK,UAAU,CAAVA,UAAzC,CAAqDG,UAAU,CAAVA,UAArD,CAA9B,EACGnB,QADH,CADF,CAKD","sourcesContent":["import React, { useReducer, createContext } from 'react'\r\nimport { todoReducer } from '../reducers/todoReducer'\r\nimport axios from 'axios'\r\n\r\n// Initial state\r\nconst initialState = { todos: [] }\r\n\r\n\r\n// create context\r\nexport const TodosContext = createContext(initialState);\r\n\r\n// Provider component\r\nexport default function TodosContextProvider({ children }) {\r\n  const [state, dispatch] = useReducer(todoReducer, initialState)\r\n\r\n  //Actions\r\n  async function getTodos() {\r\n    try {\r\n      const res = await axios.get('http://localhost:5000/')\r\n      dispatch({\r\n        type: 'GET_TODOS',\r\n        payload: res.data.data\r\n      })\r\n    }\r\n    catch (error) {\r\n      console.log(error)\r\n    }\r\n  }\r\n\r\n  async function addTodo(newTodo) {\r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }\r\n    try {\r\n      const res = await axios.post('/', newTodo, config)\r\n      dispatch({\r\n        type: 'ADD_TODO',\r\n        payload: res.data.data\r\n      })\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n\r\n  }\r\n\r\n  async function deleteTodo(_id) {\r\n    try {\r\n      await axios.delete(`/${_id}`)\r\n      dispatch({\r\n        type: 'DELETE_TODO',\r\n        payload: { _id }\r\n      })\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n\r\n  }\r\n\r\n  async function searchTodo(search) {\r\n    dispatch({\r\n      type: 'SEARCH_TODO',\r\n      payload: { search }\r\n    })\r\n  }\r\n\r\n  return (\r\n    <TodosContext.Provider value={{ todos: state.todos, getTodos, addTodo, deleteTodo, searchTodo }} >\r\n      {children}\r\n    </ TodosContext.Provider >\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}